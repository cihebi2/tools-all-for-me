# HTMLè½¬PNGè½¬æ¢å™¨ - ä¿®å¤ç‰ˆéƒ¨ç½²æŒ‡å—

## ğŸ”§ ä¿®å¤å†…å®¹

è¿™ä¸ªä¿®å¤ç‰ˆè§£å†³äº†ä¹‹å‰éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„æ‰€æœ‰é—®é¢˜ï¼š

### âœ… å·²ä¿®å¤çš„é—®é¢˜

1. **npmé•œåƒæºé—®é¢˜**
   - è‡ªåŠ¨è®¾ç½®ä¸º https://registry.npmmirror.com
   - æ¸…é™¤æ—§çš„é•œåƒæºé…ç½®
   - å¤„ç†npmç¼“å­˜æƒé™é—®é¢˜

2. **ä¸­æ–‡å­—ä½“æ˜¾ç¤ºé—®é¢˜**
   - è‡ªåŠ¨å®‰è£… Noto Sans CJK SC å­—ä½“
   - è‡ªåŠ¨å®‰è£…æ–‡æ³‰é©¿å­—ä½“
   - åœ¨HTMLæ¸²æŸ“æ—¶è‡ªåŠ¨æ·»åŠ ä¸­æ–‡å­—ä½“CSS

3. **æƒé™é—®é¢˜**
   - æ”¯æŒrootç”¨æˆ·è¿è¡Œï¼ˆè‡ªåŠ¨å¤„ç†æƒé™ï¼‰
   - ä¿®å¤npmç¼“å­˜ç›®å½•æƒé™
   - æ­£ç¡®è®¾ç½®é¡¹ç›®æ–‡ä»¶æ‰€æœ‰æƒ

4. **HTTPå…¼å®¹æ€§é—®é¢˜**
   - ç§»é™¤æ‰€æœ‰å®‰å…¨å¤´éƒ¨å†²çª
   - ç¡®ä¿æœåŠ¡ç»‘å®šåˆ° 0.0.0.0
   - æ”¯æŒçº¯HTTPè®¿é—®

5. **ä»£ç è¯­æ³•é”™è¯¯**
   - ä¿®å¤ browserPool.js æ–‡ä»¶è¯­æ³•é”™è¯¯
   - ä¿®å¤ converter.js æ–‡ä»¶ç»“æ„
   - ç®€åŒ– config.js é…ç½®

6. **æœåŠ¡å¯åŠ¨é—®é¢˜**
   - ä½¿ç”¨ server_clean.js æ›¿ä»£åŸå§‹server.js
   - ç§»é™¤å®‰å…¨ä¸­é—´ä»¶å†²çª
   - ä¼˜åŒ–æµè§ˆå™¨æ± ç®¡ç†

## ğŸš€ ä¸€é”®éƒ¨ç½²

### 1. ä¸‹è½½éƒ¨ç½²è„šæœ¬

```bash
wget https://raw.githubusercontent.com/cihebi2/tools-all-for-me/main/deploy.sh
chmod +x deploy.sh
```

### 2. è¿è¡Œéƒ¨ç½²è„šæœ¬

```bash
./deploy.sh
```

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æµ‹æ“ä½œç³»ç»Ÿç±»å‹
- âœ… å®‰è£…ä¸­æ–‡å­—ä½“
- âœ… å®‰è£…Node.js 18.x
- âœ… é…ç½®npmé•œåƒæº
- âœ… å®‰è£…ç³»ç»Ÿä¾èµ–
- âœ… å…‹éš†é¡¹ç›®ä»£ç 
- âœ… ä¿®å¤é¡¹ç›®æ–‡ä»¶
- âœ… å®‰è£…é¡¹ç›®ä¾èµ–
- âœ… å¯åŠ¨PM2æœåŠ¡
- âœ… é…ç½®Nginxåå‘ä»£ç†
- âœ… é…ç½®é˜²ç«å¢™

### 3. éªŒè¯éƒ¨ç½²

éƒ¨ç½²å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éªŒè¯ï¼š

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 status

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost:3003/api/health

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
pm2 logs html-to-png-converter

# æµ‹è¯•ä¸­æ–‡å­—ä½“
fc-list :lang=zh
```

## ğŸŒ è®¿é—®æœåŠ¡

- **ç›´æ¥è®¿é—®**: http://your-server-ip:3003
- **Nginxä»£ç†**: http://your-domain.com
- **APIç«¯ç‚¹**: http://your-server-ip:3003/api/convert

## ğŸ›  æ•…éšœæ’é™¤

### å¦‚æœæœåŠ¡æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
pm2 logs html-to-png-converter --lines 50

# é‡å¯æœåŠ¡
pm2 restart html-to-png-converter

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 3003
```

### å¦‚æœä¸­æ–‡æ˜¾ç¤ºå¼‚å¸¸

```bash
# æ£€æŸ¥ä¸­æ–‡å­—ä½“
fc-list :lang=zh

# æ‰‹åŠ¨å®‰è£…å­—ä½“
sudo apt install fonts-noto-cjk fonts-wqy-zenhei
sudo fc-cache -fv
```

### å¦‚æœæ— æ³•å¤–ç½‘è®¿é—®

```bash
# æ£€æŸ¥é˜²ç«å¢™
sudo ufw status

# å¼€æ”¾ç«¯å£
sudo ufw allow 3003

# æ£€æŸ¥æœåŠ¡ç»‘å®š
netstat -tlnp | grep 3003
```

## ğŸ“ é…ç½®HTTPSï¼ˆå¯é€‰ï¼‰

```bash
# å®‰è£…Certbot
sudo apt install snapd
sudo snap install --classic certbot

# è·å–SSLè¯ä¹¦
sudo certbot --nginx -d your-domain.com
```

## ğŸ”„ æ›´æ–°æœåŠ¡

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/tools-all-for-me/html-to-png-converter

# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡å¯æœåŠ¡
pm2 restart html-to-png-converter
```

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+ / Debian 10+ / CentOS 7+
- **å†…å­˜**: è‡³å°‘ 2GB RAM
- **ç£ç›˜**: è‡³å°‘ 5GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: èƒ½å¤Ÿè®¿é—®npmé•œåƒæºå’ŒGitHub

## âš¡ æ€§èƒ½ä¼˜åŒ–

### è°ƒæ•´æµè§ˆå™¨æ± å¤§å°

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```bash
NODE_ENV=production
PORT=3003
MAX_BROWSERS=5  # æ ¹æ®æœåŠ¡å™¨æ€§èƒ½è°ƒæ•´
```

### ç›‘æ§èµ„æºä½¿ç”¨

```bash
# å®æ—¶ç›‘æ§
pm2 monit

# æŸ¥çœ‹èµ„æºä½¿ç”¨
pm2 show html-to-png-converter
```

## ğŸ†˜ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥ `pm2 logs html-to-png-converter` çš„æ—¥å¿—è¾“å‡º
3. ç¡®ä¿æœåŠ¡å™¨æ»¡è¶³ç¯å¢ƒè¦æ±‚
4. æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚
