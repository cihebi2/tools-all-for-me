# HTMLè½¬PNGé«˜æ¸…è½¬æ¢å·¥å…·

ä¸€ä¸ªåŸºäºNode.jså’ŒPuppeteerçš„é«˜æ€§èƒ½HTMLè½¬PNGè½¬æ¢æœåŠ¡ï¼Œæ”¯æŒé«˜æ¸…è¾“å‡ºå’Œè‡ªå®šä¹‰é…ç½®ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¨ **é«˜æ¸…è¾“å‡º**: æ”¯æŒ2xã€3xç¼©æ”¾ï¼Œç¡®ä¿å›¾ç‰‡æ¸…æ™°åº¦
- âš¡ **é«˜æ€§èƒ½**: æµè§ˆå™¨å®ä¾‹æ± ï¼Œæå‡è½¬æ¢æ•ˆç‡
- ğŸ›¡ï¸ **å®‰å…¨å¯é **: å†…ç½®å®‰å…¨ä¸­é—´ä»¶å’Œé€Ÿç‡é™åˆ¶
- ğŸŒ **Webç•Œé¢**: å‹å¥½çš„ç½‘é¡µæ“ä½œç•Œé¢
- ğŸ³ **Dockeræ”¯æŒ**: ä¸€é”®éƒ¨ç½²åˆ°ä»»ä½•ç¯å¢ƒ
- ğŸ“± **å“åº”å¼**: æ”¯æŒå„ç§å°ºå¯¸å’Œè®¾å¤‡
- ğŸ¯ **çµæ´»é…ç½®**: æ”¯æŒé€æ˜èƒŒæ™¯ã€å®Œæ•´é¡µé¢ç­‰é€‰é¡¹
- ğŸ–¥ï¸ **æ¡Œé¢åº”ç”¨**: æ”¯æŒWindowsæ¡Œé¢ç‰ˆæœ¬

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Windowsä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

1. **æ¡Œé¢ç‰ˆæœ¬**
   ```
   åŒå‡»ï¼šå¯åŠ¨æ¡Œé¢ç‰ˆ.bat
   ```

2. **Webç‰ˆæœ¬**
   ```
   åŒå‡»ï¼šå¯åŠ¨Webç‰ˆ.bat
   ```

3. **æ‰“åŒ…exe**
   ```
   åŒå‡»ï¼šbuild.bat
   ```

### å‘½ä»¤è¡Œå¯åŠ¨

1. **å®‰è£…ä¾èµ–**
```bash
npm install
```

2. **å¯åŠ¨æœåŠ¡**
```bash
npm start          # Webç‰ˆæœ¬
npm run electron   # æ¡Œé¢ç‰ˆæœ¬
```

3. **è®¿é—®åº”ç”¨**
- Webç‰ˆï¼šhttp://localhost:3003
- æ¡Œé¢ç‰ˆï¼šè‡ªåŠ¨æ‰“å¼€åº”ç”¨çª—å£

## ğŸ“– APIæ–‡æ¡£

### POST /api/convert

å°†HTMLè½¬æ¢ä¸ºPNGå›¾ç‰‡

**è¯·æ±‚ä½“:**
```json
{
  "html": "<html>...</html>",
  "width": 1920,
  "height": 1080,
  "scale": 2,
  "fullPage": true,
  "transparent": false
}
```

**å‚æ•°è¯´æ˜:**
- `html` (å¿…éœ€): HTMLå†…å®¹
- `width` (å¯é€‰): è§†å£å®½åº¦ï¼Œé»˜è®¤1920
- `height` (å¯é€‰): è§†å£é«˜åº¦ï¼Œé»˜è®¤1080
- `scale` (å¯é€‰): ç¼©æ”¾å€æ•°ï¼Œé»˜è®¤2
- `fullPage` (å¯é€‰): æ˜¯å¦æˆªå–å®Œæ•´é¡µé¢ï¼Œé»˜è®¤true
- `transparent` (å¯é€‰): æ˜¯å¦é€æ˜èƒŒæ™¯ï¼Œé»˜è®¤false

## ğŸ³ Dockeréƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t html-to-png .

# è¿è¡Œå®¹å™¨
docker run -p 3003:3003 html-to-png

# æˆ–ä½¿ç”¨ Docker Compose
docker-compose up -d
```

## ğŸ”§ æœåŠ¡å™¨éƒ¨ç½²

### PM2éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨æœåŠ¡
pm2 start server.js --name html-to-png

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup && pm2 save
```

### Nginxåå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3003;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

## ğŸ“¦ Windowsåº”ç”¨æ‰“åŒ…

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ï¼š
- `BUILD.md` - å®Œæ•´æ„å»ºæ–‡æ¡£
- `å¿«é€Ÿæ‰“åŒ…æŒ‡å—.md` - ä¸­æ–‡å¿«é€ŸæŒ‡å—
- `ä½¿ç”¨è¯´æ˜.txt` - ç®€è¦ä½¿ç”¨è¯´æ˜

## ğŸ› ï¸ æ•…éšœæ’é™¤

è¿è¡Œè¯Šæ–­å·¥å…·ï¼š
```
åŒå‡»ï¼šdiagnose.bat
```

å¸¸è§é—®é¢˜è§£å†³ï¼š
1. **é—ªé€€**: ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ
2. **ç«¯å£å ç”¨**: æ£€æŸ¥3003ç«¯å£æ˜¯å¦è¢«å ç”¨
3. **ä¾èµ–é—®é¢˜**: åˆ é™¤node_modulesé‡æ–°å®‰è£…

## ğŸ“ é¡¹ç›®ç»“æ„

```
html-to-png-converter/
â”œâ”€â”€ server.js              # ä¸»æœåŠ¡å™¨
â”œâ”€â”€ electron-main.js       # Electronä¸»è¿›ç¨‹
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ *.bat                  # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ public/                # Webç•Œé¢
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â””â”€â”€ assets/                # åº”ç”¨å›¾æ ‡
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ï¿½ï¿½ è®¸å¯è¯

MIT License 