# HTMLè½¬PNGè½¬æ¢å™¨ - äº‘æœåŠ¡å™¨éƒ¨ç½²è®°å½•

## ğŸŒŸ é¡¹ç›®çŠ¶æ€
- **éƒ¨ç½²å®Œæˆ**: âœ… 2025-07-23
- **æœåŠ¡å™¨IP**: 144.34.227.86
- **åŸŸå**: tool.cihebi.vip
- **æœåŠ¡ç«¯å£**: 3003

## ğŸ“‚ æœåŠ¡å™¨æ–‡ä»¶ç»“æ„
```
/www/wwwroot/tools-all-for-me-main/
â””â”€â”€ html-to-png-converter/
    â”œâ”€â”€ server_enhanced.js          # å¢å¼ºç‰ˆæœåŠ¡å™¨ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰
    â”œâ”€â”€ server_with_ui.js           # æ ‡å‡†ç‰ˆæœåŠ¡å™¨
    â”œâ”€â”€ utils/
    â”‚   â”œâ”€â”€ converter.js            # å½“å‰è½¬æ¢å™¨ï¼ˆå¢å¼ºç‰ˆï¼‰
    â”‚   â”œâ”€â”€ converter_enhanced.js   # å¢å¼ºç‰ˆè½¬æ¢å™¨æºæ–‡ä»¶
    â”‚   â”œâ”€â”€ browserPool.js          # å½“å‰æµè§ˆå™¨æ± ï¼ˆå¢å¼ºç‰ˆï¼‰
    â”‚   â””â”€â”€ browserPool_enhanced.js # å¢å¼ºç‰ˆæµè§ˆå™¨æ± æºæ–‡ä»¶
    â”œâ”€â”€ public/                     # Webç•Œé¢æ–‡ä»¶
    â”œâ”€â”€ uploads/                    # ä¸Šä¼ ä¸´æ—¶æ–‡ä»¶
    â”œâ”€â”€ configs/                    # é…ç½®æ–‡ä»¶æ¨¡æ¿
    â””â”€â”€ package.json
```

## ğŸ”§ å½“å‰é…ç½®

### PM2æœåŠ¡é…ç½®
```bash
# æœåŠ¡åç§°: html-to-png-converter
# å¯åŠ¨æ–‡ä»¶: server_enhanced.js æˆ– server_with_ui.js
# ç›‘å¬ç«¯å£: 3003
# çŠ¶æ€: online
```

### Nginxåå‘ä»£ç†
```nginx
server {
    listen 80;
    server_name tool.cihebi.vip;
    
    location / {
        proxy_pass http://127.0.0.1:3003;
        # ... å…¶ä»–é…ç½®
    }
}
```

### ç³»ç»Ÿä¾èµ–
- **Node.js**: v22.17.1
- **PM2**: å·²å®‰è£…
- **Nginx**: å·²é…ç½®
- **å­—ä½“æ”¯æŒ**: 
  - fonts-noto-cjk (ä¸­æ–‡å­—ä½“)
  - fonts-noto-color-emoji (è¡¨æƒ…ç¬¦å·)
  - fonts-wqy-zenhei (æ–‡æ³‰é©¿å­—ä½“)
  - Font Awesome (å›¾æ ‡å­—ä½“ï¼Œé€šè¿‡CDN)

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### å¢å¼ºåŠŸèƒ½
- âœ… **å¤–éƒ¨èµ„æºåŠ è½½**: æ”¯æŒé˜¿é‡Œäº‘OSSç­‰å¤–éƒ¨å›¾ç‰‡
- âœ… **ä¸­æ–‡å­—ä½“æ¸²æŸ“**: å®Œæ•´çš„ä¸­æ–‡å­—ä½“æ”¯æŒ
- âœ… **Font Awesomeå›¾æ ‡**: æ”¯æŒFA6ã€FA5ã€FA4ç‰ˆæœ¬
- âœ… **SVGä¼˜åŒ–æ¸²æŸ“**: é’ˆå¯¹SVGå›¾åƒä¼˜åŒ–
- âœ… **æ™ºèƒ½æµè§ˆå™¨æ± **: è‡ªåŠ¨ç®¡ç†Puppeteerå®ä¾‹
- âœ… **è¯·æ±‚æ‹¦æˆªå™¨**: å¤„ç†å¤–éƒ¨èµ„æºåŠ è½½
- âœ… **é”™è¯¯æ¢å¤**: è‡ªåŠ¨é‡è¯•å’Œé”™è¯¯å¤„ç†

### ç›‘æ§ç«¯ç‚¹
- **å¥åº·æ£€æŸ¥**: `http://tool.cihebi.vip/api/health`
- **æµè§ˆå™¨çŠ¶æ€**: `http://tool.cihebi.vip/api/browsers/status`
- **ç³»ç»Ÿä¿¡æ¯**: `http://tool.cihebi.vip/api/system/info`

## ğŸ”„ æ›´æ–°æµç¨‹

### å·²éªŒè¯çš„æ›´æ–°æ–¹æ³•
```bash
cd /www/wwwroot/tools-all-for-me-main

# 1. åˆ é™¤å†²çªæ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
sudo rm -f html-to-png-converter/update.sh

# 2. æ‹‰å–æœ€æ–°ä»£ç 
sudo git pull origin main

# 3. è¿›å…¥é¡¹ç›®ç›®å½•
cd html-to-png-converter

# 4. åº”ç”¨å¢å¼ºç‰ˆæ–‡ä»¶
sudo cp utils/converter_enhanced.js utils/converter.js
sudo cp utils/browserPool_enhanced.js utils/browserPool.js

# 5. é‡å¯æœåŠ¡
pm2 restart html-to-png-converter

# 6. éªŒè¯æ›´æ–°
pm2 status
pm2 logs html-to-png-converter --lines 10
curl http://localhost:3003/api/health
```

## ğŸ› ï¸ å·²è§£å†³é—®é¢˜

### 1. PNG Qualityå‚æ•°é”™è¯¯
**é—®é¢˜**: `Error: png screenshots do not support 'quality'`
**è§£å†³**: ä»converter_enhanced.jsä¸­ç§»é™¤äº†qualityå‚æ•°
**çŠ¶æ€**: âœ… å·²ä¿®å¤

### 2. å¤–éƒ¨èµ„æºåŠ è½½
**é—®é¢˜**: SVGä¸­çš„å¤–éƒ¨å›¾ç‰‡æ— æ³•æ˜¾ç¤º
**è§£å†³**: æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨å’Œèµ„æºåŠ è½½ç­‰å¾…
**çŠ¶æ€**: âœ… å·²ä¿®å¤

### 3. ä¸­æ–‡å­—ä½“æ˜¾ç¤º
**é—®é¢˜**: ä¸­æ–‡å­—ç¬¦æ˜¾ç¤ºå¼‚å¸¸
**è§£å†³**: å®‰è£…å®Œæ•´çš„ä¸­æ–‡å­—ä½“åŒ…å’Œå­—ä½“å›é€€ç­–ç•¥
**çŠ¶æ€**: âœ… å·²ä¿®å¤

### 4. Gitæ›´æ–°å†²çª
**é—®é¢˜**: update.shæ–‡ä»¶å†²çªå¯¼è‡´æ‹‰å–å¤±è´¥
**è§£å†³**: å…ˆåˆ é™¤æœ¬åœ°å†²çªæ–‡ä»¶å†æ‹‰å–
**çŠ¶æ€**: âœ… å·²è§£å†³

## ğŸ“Š æ€§èƒ½å‚æ•°

### å½“å‰è¿è¡ŒçŠ¶æ€
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ html-to-png-conveâ€¦ â”‚ fork     â”‚ X    â”‚ online    â”‚ 0%       â”‚ ~80mb    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¼˜åŒ–è®¾ç½®
- **æœ€å¤§æµè§ˆå™¨å®ä¾‹**: 3ä¸ª
- **è¶…æ—¶æ—¶é—´**: 60ç§’
- **å†…å­˜é™åˆ¶**: 1GB
- **æ–‡ä»¶ä¸Šä¼ é™åˆ¶**: 10MB

## ğŸ” ç»´æŠ¤å‘½ä»¤

### æ—¥å¸¸ç›‘æ§
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs html-to-png-converter

# é‡å¯æœåŠ¡
pm2 restart html-to-png-converter

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
pm2 monit
```

### æ•…éšœæ’é™¤
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 3003

# æ£€æŸ¥NginxçŠ¶æ€
sudo systemctl status nginx

# æ£€æŸ¥å­—ä½“å®‰è£…
fc-list :lang=zh

# æµ‹è¯•API
curl http://localhost:3003/api/health
```

## ğŸ“‹ å¾…åŠäº‹é¡¹

### å·²å®Œæˆ
- [x] ä¿®å¤PNG qualityå‚æ•°é”™è¯¯
- [x] å¢å¼ºå¤–éƒ¨èµ„æºåŠ è½½æ”¯æŒ
- [x] å®Œå–„ä¸­æ–‡å­—ä½“æ¸²æŸ“
- [x] æ·»åŠ Font Awesomeå›¾æ ‡æ”¯æŒ
- [x] åˆ›å»ºä¸€é”®æ›´æ–°è„šæœ¬
- [x] é…ç½®åŸŸååå‘ä»£ç†

### å¯é€‰ä¼˜åŒ–
- [ ] é…ç½®HTTPSè¯ä¹¦
- [ ] æ·»åŠ æ—¥å¿—è½®è½¬
- [ ] è®¾ç½®ç›‘æ§å‘Šè­¦
- [ ] ä¼˜åŒ–ç¼“å­˜ç­–ç•¥
- [ ] æ·»åŠ å¤‡ä»½è„šæœ¬

## ğŸ“ é‡è¦ä¿¡æ¯

### è®¿é—®åœ°å€
- **Webç•Œé¢**: http://tool.cihebi.vip
- **ç›´æ¥è®¿é—®**: http://144.34.227.86:3003
- **APIæ–‡æ¡£**: å†…ç½®åœ¨Webç•Œé¢ä¸­

### å…³é”®æ–‡ä»¶ä½ç½®
- **é¡¹ç›®æ ¹ç›®å½•**: `/www/wwwroot/tools-all-for-me-main/html-to-png-converter`
- **Nginxé…ç½®**: `/etc/nginx/sites-available/html-to-png`
- **PM2é…ç½®**: é€šè¿‡å‘½ä»¤è¡Œç®¡ç†
- **æ—¥å¿—æ–‡ä»¶**: PM2è‡ªåŠ¨ç®¡ç†

### ä¾èµ–å…³ç³»
- **GitHubä»“åº“**: https://github.com/cihebi2/tools-all-for-me
- **æ ¸å¿ƒæŠ€æœ¯**: Node.js + Express + Puppeteer
- **å‰ç«¯æ¡†æ¶**: åŸç”ŸJavaScript + HTML5
- **åå‘ä»£ç†**: Nginx
- **è¿›ç¨‹ç®¡ç†**: PM2

---

**è®°å½•æ—¶é—´**: 2025-07-23  
**æ›´æ–°çŠ¶æ€**: æœåŠ¡æ­£å¸¸è¿è¡Œï¼Œæ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡  
**ä¸‹æ¬¡æ£€æŸ¥**: å»ºè®®æ¯å‘¨æ£€æŸ¥ä¸€æ¬¡æœåŠ¡çŠ¶æ€